<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Parody — Secure Download</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      min-height: 100svh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0d1117;
      color: #e6edf3;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .card {
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 12px;
      padding: 2rem 2.5rem;
      width: min(92vw, 380px);
      text-align: center;
    }
    .logo { font-size: 2.5rem; margin-bottom: .75rem; }
    h1 { font-size: 1.25rem; font-weight: 600; margin-bottom: .25rem; }
    .sub { color: #8b949e; font-size: .85rem; margin-bottom: 1.75rem; }
    label { display: block; text-align: left; font-size: .8rem; color: #8b949e; margin-bottom: .4rem; }
    input[type="password"] {
      width: 100%;
      padding: .65rem .9rem;
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 6px;
      color: #e6edf3;
      font-size: 1rem;
      outline: none;
      margin-bottom: 1rem;
      transition: border-color .15s;
    }
    input[type="password"]:focus { border-color: #58a6ff; }
    button {
      width: 100%;
      padding: .7rem;
      background: #238636;
      border: none;
      border-radius: 6px;
      color: #fff;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background .15s;
    }
    button:hover { background: #2ea043; }
    button:active { background: #1a7f37; }
    .msg {
      margin-top: 1rem;
      font-size: .85rem;
      min-height: 1.2em;
      color: #f85149;
    }
    .msg.ok { color: #3fb950; }
  </style>
</head>
<body>
<div class="card">
  <div class="logo">&#128241;</div>
  <h1>Parody</h1>
  <p class="sub">zstack edge node for Android</p>

  <label for="pw">Download password</label>
  <input id="pw" type="password" placeholder="Enter password" autocomplete="off">
  <button id="btn">Download APK</button>
  <p id="msg" class="msg"></p>
</div>

<script>
  // SHA-256 of the download password (change via: echo -n 'yourpassword' | sha256sum)
  const HASH = "da83b4464cad304e72826919e67834bf0188ee934b078a4f985d09dc7ef7e487";
  const APK  = "https://raw.githubusercontent.com/laguilera03/online_distro/main/parody.apk";

  async function sha256(str) {
    const buf  = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(str));
    return Array.from(new Uint8Array(buf)).map(b => b.toString(16).padStart(2, "0")).join("");
  }

  document.getElementById("btn").addEventListener("click", async () => {
    const pw  = document.getElementById("pw").value;
    const msg = document.getElementById("msg");
    if (!pw) { msg.textContent = "Please enter the password."; msg.className = "msg"; return; }

    const digest = await sha256(pw);
    if (digest !== HASH) {
      msg.textContent = "Incorrect password.";
      msg.className   = "msg";
      return;
    }

    msg.textContent = "Correct — starting download...";
    msg.className   = "msg ok";

    // Trigger download
    const a = document.createElement("a");
    a.href     = APK;
    a.download = "parody.apk";
    a.click();
  });

  document.getElementById("pw").addEventListener("keydown", e => {
    if (e.key === "Enter") document.getElementById("btn").click();
  });
</script>
</body>
</html>
